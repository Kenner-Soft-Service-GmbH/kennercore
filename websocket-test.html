<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Websocket test</title>
    <script type="text/javascript" src="/client/lib/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="/client/lib/autobahn.min.js"></script>
</head>
<body>
<h1>Testing websocket connection</h1>
<h3>Open browser console for testing</h3>

<table>
    <tbody>
    <tr>
        <td><span>Submit button for testing websocket filter</span></td>
        <td><input id="call" type="button" value="Filter"/></td>
    </tr>
    </tbody>
</table>
</body>
</html>

<script type="text/javascript">
    var conn = new ab.Session('ws://127.0.0.1:8080',
        function () {
            conn.subscribe('test', function (topic, data) {
                console.log(data);
            });
        },
        function () {
            console.warn('WebSocket connection closed');
        },
        {'skipSubprotocolCheck': true}
    );

    $(function () {
        $('#call').click(function () {
            conn.publish('test', {"test": "1"}, false);
        });
    });
</script>